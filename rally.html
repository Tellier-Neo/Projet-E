<!DOCTYPE html>
<html>

    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>Projet E</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel='stylesheet' type='text/css' media='screen'
            href='assets/style/style.css' id="themeStylesheet">
        <script src="assets/script/session_check.js"></script>

    </head>

    <body>
        <div class="nav-bar">

            <div class="nav-bar-button" id="boutton_1">
                Menu
            </div>
            <div class="nav-bar-button_var2" id="boutton_2">
                Rally
            </div>
            <div class="nav-bar-button" id="boutton_3">
                Groupe B
            </div>
            <div class="nav-bar-button" id="boutton_4">
                Wikicar
            </div>
        </div>
        <div class="logbar">
            <button id="logButton" style="display: inline;"
                class="logRegDisButton"> Se connecter</button>
            <button id="registerButton" style="display: inline;"
                class="logRegDisButton">Créer un compte</button>
            <div id="userName" style="display: none;"
                class="logRegDisButton2"></div>
            <script>// Fonction pour supprimer le cookie par son nom
        function deleteCookie(cookieName) {
            document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
        }
        
        // Fonction pour déconnecter l'utilisateur
        async function disconnectUser() {
            const userUUID = getCookieValue('ProjetE_unique_user_token');
        
            // Vérifie la présence du userUUID dans les cookies
            if (userUUID) {
                try {
                    // Envoie une requête vers /disconnect avec le userUUID
                    const response = await fetch('http://192.168.64.242:3000/disconnect', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ userUUID }),
                    });
        
                    if (response.ok) {
                        console.log('Utilisateur déconnecté avec succès.');
                    } else {
                        console.error('Erreur lors de la requête (disconnect):', response.statusText);
                    }
                } catch (error) {
                    console.error('Erreur lors de la requête (disconnect):', error.message);
                }
        
                // Supprime le cookie userUUID
                deleteCookie('ProjetE_unique_user_token');
        
                // Recharge la page
                location.reload();
            } else {
                console.log('Pas de userUUID trouvé dans les cookies. Aucune déconnexion nécessaire.');
            }
        }
        
        
        </script>
            <button id="Unlog" style="display: none;" class="logRegDisButton"
                onclick="disconnectUser()">Se
                déconnecter</button>
        </div>

        

        <script>
        let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');

    function showSlide(index) {
        slides.forEach((slide) => {
            slide.classList.remove('active'); // Ajoutez cette ligne pour supprimer la classe 'active'
        });

        slides[index].classList.add('active'); // Ajoutez cette ligne pour ajouter la classe 'active'
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    // Afficher la première diapositive au chargement de la page
    showSlide(currentSlide);

    </script>

    </body>
    <footer>
        <div class="footer_text">Tellier Néo - 2023 - Projet E</div>
    </footer>
    <script src="/assets/script/main.js"></script>

</html>